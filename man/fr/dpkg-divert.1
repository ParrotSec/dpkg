.\" dpkg manual page - dpkg-divert(1)
.\"
.\" Copyright © 1995 Ian Jackson <ijackson@chiark.greenend.org.uk>
.\" Copyright © 1999 Wichert Akkerman <wakkerma@debian.org>
.\" Copyright © 2004 Scott James Remnant <keybuk@debian.org>
.\" Copyright © 2007-2013, 2015-2018 Guillem Jover <guillem@debian.org>
.\"
.\" This is free software; you can redistribute it and/or modify
.\" it under the terms of the GNU General Public License as published by
.\" the Free Software Foundation; either version 2 of the License, or
.\" (at your option) any later version.
.\"
.\" This is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public License
.\" along with this program.  If not, see <https://www.gnu.org/licenses/>.
.
.\"*******************************************************************
.\"
.\" This file was generated with po4a. Translate the source file.
.\"
.\"*******************************************************************
.TH dpkg\-divert 1 2019-03-25 1.19.6 "suite dpkg"
.nh
.SH NOM
dpkg\-divert \- Remplacer la version d'un fichier contenu dans un paquet.
.
.SH SYNOPSIS
\fBdpkg\-divert\fP [\fIoption\fP...] \fIcommande\fP
.
.SH DESCRIPTION
\fBdpkg\-divert\fP sert \(`a cr\('eer et \(`a mettre \(`a jour la liste des d\('etournements.
.PP
Le \fId\('etournement\fP de fichier est un moyen d'obliger \fBdpkg\fP(1) \(`a installer
un fichier non pas dans l'emplacement pr\('evu mais dans un autre. Les scripts
des paquets Debian se servent du d\('etournement pour d\('eplacer les fichiers qui
cr\('eent des conflits. Les administrateurs s'en servent, lors de
l'installation d'une version plus r\('ecente d'un paquet, pour remplacer les
fichiers de configuration de certains paquets ou bien \(`a chaque fois que des
fichiers (qui ne sont pas des \(Fo\ conffiles\ \(Fc) doivent \(^etre pr\('eserv\('es par
\fBdpkg\fP.
.sp
.SH COMMANDES
.TP 
[\fB\-\-add\fP] \fIfichier\fP
Ajoute un d\('etournement pour \fIfichier\fP. Le fichier n'est pas renomm\('e
actuellement, voir \fB\-\-rename\fP.
.TP 
\fB\-\-remove\fP\fI fichier\fP
Supprime un d\('etournement pour \fIfichier\fP. Le fichier n'est pas renomm\('e
actuellement, voir \fB\-\-rename\fP.
.TP 
\fB\-\-list\fP \fImotif\-global\fP
Liste les d\('etournements qui correspondent \(`a \fImotif\-global\fP.
.TP 
\fB\-\-listpackage\fP\fI fichier\fP
Affiche le nom du paquet qui d\('etourne \fIfichier\fP (depuis
dpkg\ 1.15.0). Affiche LOCAL si \fIfichier\fP est d\('etourn\('e localement et
n'affiche rien si \fIfichier\fP n'est pas d\('etourn\('e.
.TP 
\fB\-\-truename\fP\fI fichier\fP
Affiche le vrai nom d'un fichier d\('etourn\('e.
.
.SH OPTIONS
.TP 
\fB\-\-admindir\fP\fI r\('epertoire\fP
D\('efinit le r\('epertoire d'administration comme \fIr\('epertoire\fP. Par d\('efaut c'est
\(Fo\ \fI/var/lib/dpkg\fP\ \(Fc.
.TP 
\fB\-\-instdir\fP \fIr\('epertoire\fP
D\('efinit le r\('epertoire d'installation qui d\('esigne le r\('epertoire o\(`u les
paquets sont install\('es (depuis dpkg\ 1.19.2). Par d\('efaut c'est \(Fo\ \fI/\fP\ \(Fc.
.TP 
\fB\-\-root\fP \fIr\('epertoire\fP
D\('efinit le r\('epertoire root \(`a \fBdirectory\fP, ce qui d\('efinit le r\('epertoire
d'installation \(`a \(Fo\ \fIr\('epertoire\fP\ \(Fc et le r\('epertoire d'administration \(`a
\(Fo\ \fIr\('epertoire\fP\fB/var/lib/dpkg\fP\ \(Fc (depuis dpkg\ 1.19.2).
.TP 
\fB\-\-divert\fP\fI d\('etourner\-dans\fP
\fId\('etourner\-dans\fP est l'emplacement vers lequel les versions de \fIfichier\fP,
tel qu'il est donn\('e par d'autres paquets, seront d\('etourn\('ees.
.TP 
\fB\-\-local\fP
Indique que toutes les versions de ce fichier sont d\('etourn\('ees. Cela signifie
qu'il n'y a pas d'exception et quel que soit le paquet install\('e, ce fichier
sera d\('etourn\('e. Un administrateur peut par exemple installer une version
modifi\('ee localement.
.TP 
\fB\-\-package\fP\fI paquet\fP
\fIpaquet\fP est le nom du paquet dont la copie de \fIfichier\fP ne sera pas
d\('etourn\('ee. Autrement dit, \fIfichier\fP sera d\('etourn\('e sauf s'il appartient \(`a
\fIpaquet\fP.
.TP 
\fB\-\-quiet\fP
Mode silencieux, pas de bavardage.
.TP 
\fB\-\-rename\fP
Met en fait le fichier de c\(^ot\('e. Quand le fichier de destination existe,
\fBdpkg\-divert\fP interrompt l'op\('eration. C'est le comportement courant utilis\('e
pour les d\('etournements de fichiers \(`a partir de l'ensemble de paquets
non\-\fBEssential\fP (voir \fB\-\-no\-rename\fP pour plus de d\('etails).
.TP 
\fB\-\-no\-rename\fP
Indique que le fichier ne doit pas \(^etre renomm\('e lors de l'ajout ou du
retrait d'un d\('etournement de la base de donn\('ees (depuis dpkg\ 1.19.1). Cela
est destin\('e au d\('etournement de fichiers de l'ensemble de paquets
\fBessential\fP, o\(`u la disparition temporaire du fichier original n'est pas
acceptable, car il rend non fonctionnel le syst\(`eme. C'est le comportement
par d\('efaut, mais cela changera durant le cycle de dpkg\ 1.20.x.
.TP 
\fB\-\-test\fP
Mode de test, ne modifie rien r\('eellement, montre seulement.
.TP 
\fB\-?\fP, \fB\-\-help\fP
Affiche un message d'aide puis quitte.
.TP 
\fB\-\-version\fP
Affiche le num\('ero de version puis quitte.
.
.SH "CODE DE SORTIE"
.TP 
\fB0\fP
L'action demand\('ee s'est correctement d\('eroul\('ee.
.TP 
\fB2\fP
Erreur fatale ou irr\('ecup\('erable due \(`a l'utilisation d'une ligne de commande
non valable, ou interactions avec le syst\(`eme, telles que des acc\(`es \(`a la base
de donn\('ees, des allocations de m\('emoire,\ etc.
.
.SH ENVIRONNEMENT
.TP 
\fBDPKG_ROOT\fP
Si cette variable est positionn\('ee et que les options \fB\-\-admindir\fP ou
\fB\-\-root\fP ne sont pas pr\('ecis\('ees, ce r\('epertoire sera utilis\('e comme r\('epertoire
racine du syst\(`eme de fichiers (depuis dpkg\ 1.19.2).
.TP 
\fBDPKG_ADMINDIR\fP
Si cette variable est positionn\('ee et que les options \fB\-\-admindir\fP ou
\fB\-\-root\fP ne sont pas pr\('ecis\('ees, ce r\('epertoire sera utilis\('e comme r\('epertoire
de donn\('ees pour \fBdpkg\fP.
.TP 
\fBDPKG_MAINTSCRIPT_PACKAGE\fP
Si cette variable est positionn\('ee et que les options \fB\-\-local\fP et
\fB\-\-package\fP ne le sont pas, \fBdpkg\-divert\fP en utilisera la valeur comme nom
de paquet.
.TP 
\fBDPKG_COLORS\fP
D\('efinit le mode de couleur (depuis dpkg\ 1.18.5). Les valeurs actuellement
accept\('ees sont \fBauto\fP (par d\('efaut), \fBalways\fP et \fBnever\fP.
.
.SH FICHIERS
.TP 
\fI/var/lib/dpkg/diversions\fP
Ce fichier contient la liste des d\('etournements en \(oeuvre sur le syst\(`eme. Il
se trouve dans le r\('epertoire d'administration de \fBdpkg\fP, avec d'autres
fichiers importants comme \fIstatus\fP ou \fIavailable\fP.
.br
Note\ : \fBdpkg\-divert\fP pr\('eserve l'ancienne copie de ce fichier, avec
l'extension \fI\-old\fP, avant de la remplacer par la nouvelle.
.
.SH NOTES
Pour l'ajout, le d\('efaut est \fB\-\-local\fP et \fB\-\-divert\fP
\fIoriginal\fP\fB.distrib\fP. Pour la suppression, \fB\-\-package\fP ou \fB\-\-local\fP et
\fB\-\-divert\fP doivent correspondre quand ils sont pr\('ecis\('es.

On ne peut pas d\('etourner des r\('epertoires avec \fBdpkg\-divert\fP.

Il faut faire attention quand une biblioth\(`eque partag\('ee est
d\('etourn\('ee. \fBldconfig\fP(8) cr\('ee un lien symbolique \(`a partir du champ
DT_SONAME embarqu\('e dans la biblioth\(`eque. \fBldconfig\fP ne conna\(^it pas les
d\('etournements (seul \fBdpkg\fP le fait), et si une biblioth\(`eque d\('etourn\('ee
poss\(`ede le m\(^eme SONAME que la biblioth\(`eque non d\('etourn\('ee, le lien symbolique
peut pointer en fin de compte sur la biblioth\(`eque d\('etourn\('ee.
.
.SH EXEMPLES
Pour d\('etourner toutes les copies de \fI/usr/bin/example\fP vers
\fI/usr/bin/example.foo\fP, c'est\-\(`a\-dire demander aux paquets qui fournissent
\fI/usr/bin/example\fP de l'installer dans \fI/usr/bin/example.foo\fP, en
effectuant le changement de nom si n\('ecessaire\ :
.HP
dpkg\-divert \-\-divert /usr/bin/example.foo \-\-rename /usr/bin/example
.PP
Pour supprimer ce d\('etournement\ :
.HP
dpkg\-divert \-\-rename \-\-remove /usr/bin/example

.PP
Pour d\('etourner n'importe quel paquet qui veut installer \fI/usr/bin/example\fP
dans \fI/usr/bin/example.foo\fP, sauf votre propre paquet \fIwibble\fP\ :
.HP
dpkg\-divert \-\-package wibble \-\-divert /usr/bin/example.foo \-\-rename
/usr/bin/example
.PP
Pour supprimer ce d\('etournement\ :
.HP
dpkg\-divert \-\-package wibble \-\-rename \-\-remove /usr/bin/example
.
.SH "VOIR AUSSI"
\fBdpkg\fP(1).
.SH TRADUCTION
Ariel VARDI <ariel.vardi@freesbee.fr>, 2002.
Philippe Batailler, 2006.
Nicolas Fran\(,cois, 2006.
Veuillez signaler toute erreur \(`a <debian\-l10n\-french@lists.debian.org>.
